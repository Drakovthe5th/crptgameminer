<!DOCTYPE html>
<html>
<head>
    <title>CryptoGameBot MiniApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="{{ url_for('static', filename='js/ads.js') }}"></script>
    <style>
        /* Ad container styles */
        #ad-container {
            margin: 15px auto;
            text-align: center;
            min-height: 100px;
        }
        
        #boost-earnings {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        #boost-earnings:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }
        
        #boost-earnings.weekend {
            background: linear-gradient(135deg, #FF512F 0%, #F09819 100%);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ad-label {
            font-size: 12px;
            color: #777;
            text-align: center;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Your MiniApp content -->
    </div>
    
    <!-- Boost Earnings Button -->
    <button id="boost-earnings">ðŸš€ Boost Earnings</button>
    
    <!-- Ad Container -->
    <div class="ad-label">Advertisement</div>
    <div id="ad-container">
        <!-- Ads will be loaded here -->
    </div>

    <script>
        // Initialize Telegram WebApp
        const webApp = Telegram.WebApp;
        webApp.ready();
        webApp.expand();
        
        // Initialize ad manager
        const adManager = new AdManager({
            userId: webApp.initDataUnsafe.user.id,
            country: webApp.initDataUnsafe.user.language_code || 'en'
        });
        
        // Load initial ad
        adManager.loadAd();
        
        // Setup Boost Earnings button
        const boostButton = document.getElementById('boost-earnings');
        boostButton.addEventListener('click', () => {
            adManager.showRewardedAd();
        });
        
        // Add weekend boost styling
        const today = new Date();
        if (today.getDay() === 0 || today.getDay() === 6) { // Weekend
            boostButton.classList.add('weekend');
            boostButton.innerHTML = 'ðŸš€ Weekend Boost! +50% Earnings';
        }
        
        // Ad refresh strategy
        setInterval(() => {
            adManager.refreshAd();
        }, config.AD_REFRESH_INTERVAL * 60 * 1000);
    </script>
</body>
</html>